\chapter{Subjective Timbre Evaluation}
\label{chap:TimbreEvaluation}
	\todo{Come up with a better name for this chapter.}

\section{Introduction}
\label{sec:TimbreEvaluation-Introduction}
	In order to manipulate the perceptual characteristics of a sound it is necessary to know the relationships between
	low level audio features and semantic descriptions. In Chapter \ref{chap:Timbre} several different methods for
	obtaining this information were discussed.  In this chapter a new method of collecting semantically annotated audio
	feature data is presented (Section \ref{sec:TimbreEvaluation-DAWBasedTimbreEvaluation}). Data gathered using this
	method is then analysed, producing a list of semantic descriptors and the low level audio features which contribute
	to them (Section \ref{sec:TimbreEvaluation-Analysis}).

\section{Production Environment Timbre Evaluation} % this name will probably change
\label{sec:TimbreEvaluation-DAWBasedTimbreEvaluation}
	The perceptual listening test methodologies discussed in Section \ref{sec:Timbre-ListeningTests} rely on the
	participants performing a certain set of tasks. While this structure helps to reduce the number of variables in an
	experiment it does not necessarily reflect the way audio is treated in a production environment.

	A new methodology has been developed in which the analysis of timbre is introduced into a typical music production
	workflow causing minimal interruption to the producer. This methodology aims to answer the question "What terms do
	music producers use to describe the timbral transformations they apply to audio during the creation of music?". 

	This section will detail what the typical production workflow is and how semantic information can be gathered.

	\subsection{Music Production Workflow}
		\todo{Find some references for this section. Probably mixing engineers handbook or something.}

		The music production workflow has four main stages:

		\begin{itemize}
			\item Recording
			\item Editing
			\item Mixing
			\item Mastering
		\end{itemize}

		At every stage of this process semantic descriptors are often used to communicate the desired timbral
		qualities of the audio. For instance one my ask that a certain microphone be used because of the `warmth' it
		adds to the recorded sound. During the mixing and mastering stages audio processing effects are applied to
		shape the timbre further.  These stages will be the focus of this section as the aim of this thesis is to
		improve the intuitiveness of these effects.

		Historically audio effects were pieces of electronic hardware through which an audio signal is passed.
		Modern music production techniques utilise Digital Audio Workstation (DAW) software. This software enables
		users to record, edit and mix multiple tracks of audio using a computer. 
		
	\subsection{Analysis of Timbre Inside the DAW}
		An ideal way to collect timbral information during music production would be to have the DAW analyse the
		audio tracks used and production techniques applied. Information which could be gathered directly from the
		DAW, with no extra input from the user, includes:

		\begin{itemize}
			\item Information about the audio processing chain:
			\begin{itemize}
				\item The effects applied to each track.
				\item The order in which these effects are applied.
				\item The parameter settings of these effects.
			\end{itemize}

			\item Features of the audio signal at every stage in the processing chain.
		\end{itemize}

		Additional information can be gathered by prompting the user for input:

		\begin{itemize}
			\item The genre of music being produced.
			\item The content of the separate audio tracks (what instruments etc.).
			\item Semantic terms which describe the timbral transformations applied by each audio
			      effect.
		\end{itemize}

		Achieving this would require the creation of a new DAW. This would be impractical for the current research.
		DAWs are very comprehensive software packages which perform many more tasks than the application of effects
		to audio (project management, audio editing functionality etc.). A lot of effort would be expended in
		implementing these features before any timbral data could be collected.  Music producers also tend to have a
		preferred DAW with which they work most fluidly. Convincing producers to use a new DAW, for the purposes of
		research, would be a difficult task.

		Third party developers can produce extensions to DAWs known as plug-ins. Plug-Ins provide additional audio
		processing functionality to the DAW environment. They can optionally expose their own parameters which users
		can adjust to achieve their desired effect. There are several different formats in which audio plug-ins can
		be distributed (VST, AU etc.). Most of the commonly used DAWs support plug-ins in one or more of these
		formats.

		Audio plug-ins provide a good platform to allow producers to provide semantic terms and audio feature
		information from within their preferred DAW. As part of this research a suite of audio plug-ins which
		extract this information have been developed. They have been release under the title Semantic Audio Feature
		Extraction (SAFE) Plug-Ins.

	\subsection{SAFE Plug-Ins}
		The SAFE plug-ins consist of four commonly used audio effects: Equaliser, Distortion, Compressor and Reverb.
		As part of the plug-ins's interface the user has the option to save semantic terms. The interface for the
		SAFE Distortion is shown in Figure \ref{fig:SAFE-Distortion}. Upon saving terms the plug-in will analyse the
		audio at its inputs and outputs. When the analysis is completed the results are stored, containing:

		\begin{itemize}
			\item The users description of the timbre.
			\item The plug-in's current parameter settings.
			\item The features of the audio before and after processing.
			\item Some additional data about the user and the track being worked on.
			\begin{itemize}
				\item The genre.
				\item The instrument.
				\item The users age.
				\item The users location.
				\item The users primary language.
				\item The number of year experience the user has in music production.
			\end{itemize}
		\end{itemize}

		\begin{figure}[h!]
			\centering
			\includegraphics[width=0.8\textwidth]{chapter4/Images/SAFEDistortion.png}
			\caption{The Interface for the SAFE Distortion Plug-In}
			\label{fig:SAFE-Distortion}
		\end{figure}

		The LibXtract library \citep{bullock2007libxtract} is used in the analysis of the audio. Every scalar
		feature available within LibXtract is calculated along with the MFCCs and Bark Band Coefficients. In total
		five seconds of audio is analysed in frames of 4096 samples each.

		\note{Why 4096 samples? The real reason is because LibXtract works better that way. Will that cut the
		mustard?}

		One disadvantage in using plug-ins is that they cannot gather information about the processing chain they
		may be a part of. The timbral transformation the user is describing may be the result of several effects
		working together. This can be mitigated somewhat by asking users to describe only the effect the plug-in in
		question is providing.

		The SAFE plug-ins also suffer from the same issues other distributed tests do. The researcher forfeits
		control over the listening environment in order to gather results from a much larger sample of people. In
		fact they provide even lest control that methodologies like that used in the Social EQ project
		\citep{cartwright2013socialeq} in that the choice of audio samples being used is decided by the test
		subject. 

\section{Analysis}
\label{sec:TimbreEvaluation-Analysis}

	\begin{figure}[h!]
		\centering
		\subfloat[Individual Transforms]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/DistortionProcessedMDS.eps}
			\label{fig:DistortionProcessedMDS}
		}
		\qquad
		\subfloat[Descriptor Centroids]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/DistortionProcessedCentroidsMDS.eps}
			\label{fig:DistortionProcessedCentroidsMDS}
		}
		\caption{Timbre Space for the Processed Features from the Distortion.}
		\label{fig:DistortionProcessedMDSs}
	\end{figure}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Irregularity K & -0.983 \\
			\hline
			Peak Irregularity K & -0.963 \\
			\hline
			Bark Coefficient 6 & -0.958 \\
			\hline
			Peak Spectral Kurtosis & -0.942 \\
			\hline
			Bark Coefficient 7 & -0.940 \\
			\hline
			Harmonic Irregularity K & -0.935 \\
			\hline
			Harmonic Spectral Kurtosis & -0.928 \\
			\hline
			Bark Coefficient 5 & -0.925 \\
			\hline
			Peak Spectral Skewness & -0.923 \\
			\hline
			Bark Coefficient 8 & -0.918 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 1 of the Timbre Spaces Shown in Figure 
			 \ref{fig:DistortionProcessedMDSs}.}
		\label{tab:DistortionProcessedFeaturesDim1}
	\end{table}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Spectral Centroid &  0.936 \\
			\hline
			Spectral Roll Off &  0.920 \\
			\hline
			MFCC 1 & -0.902 \\
			\hline
			Spectral Slope &  0.892 \\
			\hline
			Peak Spectral Standard Deviation &  0.865 \\
			\hline
			Harmonic Spectral Standard Deviation &  0.864 \\
			\hline
			Harmonic Spectral Centroid &  0.848 \\
			\hline
			Peak Spectral Centroid &  0.847 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 2 of the Timbre Spaces Shown in Figure 
			 \ref{fig:DistortionProcessedMDSs}.}
		\label{tab:DistortionProcessedFeaturesDim2}
	\end{table}

	\begin{figure}[h!]
		\centering
		\subfloat[Individual Transforms]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/DistortionDifferenceMDS.eps}
			\label{fig:DistortionDifferenceMDS}
		}
		\qquad
		\subfloat[Descriptor Centroids]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/DistortionDifferenceCentroidsMDS.eps}
			\label{fig:DistortionDifferenceCentroidsMDS}
		}
		\caption{Timbre Space for the Feature Differences from the Distortion.}
		\label{fig:DistortionDifferenceMDSs}
	\end{figure}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Irregularity K & 0.987 \\
			\hline
			Peak Irregularity K & 0.965 \\
			\hline
			Bark Coefficient 6 & 0.959 \\
			\hline
			Bark Coefficient 7 & 0.958 \\
			\hline
			Bark Coefficient 8 & 0.951 \\
			\hline
			Bark Coefficient 15 & 0.950 \\
			\hline
			Bark Coefficient 9 & 0.950 \\
			\hline
			Harmonic Irregularity K & 0.949 \\
			\hline
			Bark Coefficient 10 & 0.937 \\
			\hline
			Bark Coefficient 5 & 0.933 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 1 of the Timbre Spaces Shown in Figure 
			 \ref{fig:DistortionDifferenceMDSs}.}
		\label{tab:DistortionDifferenceFeatures}
	\end{table}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Spectral Roll Off & -0.878 \\
			\hline
			Spectral Variance & -0.876 \\
			\hline
			Harmonic Spectral Centroid & -0.872 \\
			\hline
			Harmonic Spectral Standard Deviation & -0.867 \\
			\hline
			Peak Spectral Centroid & -0.855 \\
			\hline
			Spectral Centroid & -0.850 \\
			\hline
			Peak Spectral Standard Deviation & -0.823 \\
			\hline
			Peak Spectral Variance & -0.820 \\
			\hline
			Harmonic Spectral Variance & -0.815 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 2 of the Timbre Spaces Shown in Figure 
			 \ref{fig:DistortionDifferenceMDSs}.}
		\label{tab:DistortionDifferenceFeatures}
	\end{table}

	\begin{figure}[h!]
		\centering
		\subfloat[Individual Transforms]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/EqualiserProcessedMDS.eps}
			\label{fig:EqualiserProcessedMDS}
		}
		\qquad
		\subfloat[Descriptor Centroids]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/EqualiserProcessedCentroidsMDS.eps}
			\label{fig:EqualiserProcessedCentroidsMDS}
		}
		\caption{Timbre Space for the Processed Features from the Equaliser.}
		\label{fig:EqualiserProcessedMDSs}
	\end{figure}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Peak Tristimulus 2 &  0.856 \\
			\hline
			Spectral Crest &  0.846 \\
			\hline
			Harmonic Tristimulus 2 &  0.844 \\
			\hline
			Harmonic Spectral Standard Deviation & -0.827 \\
			\hline
			Peak Spectral Standard Deviation & -0.825 \\
			\hline
			Bark Coefficient 17 & -0.812 \\
			\hline
			Bark Coefficient 14 & -0.807 \\
			\hline
			Peak Spectral Centroid & -0.807 \\
			\hline
			Harmonic Spectral Centroid & -0.803 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 1 of the Timbre Spaces Shown in Figure 
			 \ref{fig:EqualiserProcessedMDSs}.}
		\label{tab:EqualiserProcessedFeaturesDim1}
	\end{table}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Spectral Skewness & 0.819 \\
			\hline
			Spectral Kurtosis & 0.801 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 2 of the Timbre Spaces Shown in Figure 
			 \ref{fig:EqualiserProcessedMDSs}.}
		\label{tab:EqualiserProcessedFeaturesDim2}
	\end{table}

	\begin{figure}[h!]
		\centering
		\subfloat[Individual Transforms]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/EqualiserDifferenceMDS.eps}
			\label{fig:EqualiserDifferenceMDS}
		}
		\qquad
		\subfloat[Descriptor Centroids]
		{
			\includegraphics[width=0.45\textwidth]{chapter4/Images/EqualiserDifferenceCentroidsMDS.eps}
			\label{fig:EqualiserDifferenceCentroidsMDS}
		}
		\caption{Timbre Space for the Feature Differences from the Equaliser.}
		\label{fig:EqualiserDifferenceMDSs}
	\end{figure}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Peak Tristimulus 2 & -0.890 \\
			\hline
			Noisiness & -0.886 \\
			\hline
			Harmonic Tristimulus 2 & -0.886 \\
			\hline
			Harmonic Tristimulus 1 & -0.853 \\
			\hline
			Peak Tristimulus 1 & -0.850 \\
			\hline
			Fundamental & -0.817 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 1 of the Timbre Spaces Shown in Figure 
			 \ref{fig:EqualiserDifferenceMDSs}.}
		\label{tab:EqualiserDifferenceFeatures}
	\end{table}

	\begin{table}[h!]
		\centering
		\begin{tabular}{|c|c|}
			\hline
			\bf{Feature} & \bf{Correlation} \\
			\hline
			\hline
			Irregularity K & 0.966 \\
			\hline
			Spectral Skewness & 0.942 \\
			\hline
			Spectral Kurtosis & 0.927 \\
			\hline
			Peak Irregularity K & 0.924 \\
			\hline
			Harmonic Irregularity K & 0.874 \\
			\hline
			Harmonic Spectral Kurtosis & 0.864 \\
			\hline
			Bark Coefficient 8 & 0.825 \\
			\hline
			Bark Coefficient 9 & 0.814 \\
			\hline
			Bark Coefficient 7 & 0.803 \\
			\hline
		\end{tabular}
		\caption{Significant Features for Dimension 2 of the Timbre Spaces Shown in Figure 
			 \ref{fig:EqualiserDifferenceMDSs}.}
		\label{tab:EqualiserDifferenceFeatures}
	\end{table}
